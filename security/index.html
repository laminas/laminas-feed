<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Consume and generate Atom and RSS feeds, and interact with Pubsubhubbub.">  
    <link rel="canonical" href="https://docs.laminas.dev/laminas-feed/security/">
    <link rel="shortcut icon" href="/img/trademark-laminas-foundation-rgb.svg">

    <title>Security - laminas-feed - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
</head>
<body id="page-top" class="components">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand offset-md-2" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="../img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="https://docs.laminas.dev/components">Components</a>
                            <a class="dropdown-item" href="https://docs.mezzio.dev/">Mezzio</a>
                            <a class="dropdown-item" href="https://api-tools.getlaminas.org/docs">API Tools</a>
                            <a class="dropdown-item" href="https://docs.laminas.dev/mvc">MVC</a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-feed</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reader</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../reader/" class="subnavigation__link">Basic Usage</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../http-clients/" class="subnavigation__link">HTTP Clients</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../psr7-clients/" class="subnavigation__link">Using PSR-7 Clients</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../importing/" class="subnavigation__link">Importing Feeds</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../find-feeds/" class="subnavigation__link">Feed Discovery</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../consuming-rss/" class="subnavigation__link">Consuming RSS Feeds</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../consuming-atom/" class="subnavigation__link">Consuming Atom Feeds</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../consuming-atom-entry/" class="subnavigation__link">Consuming Atom Entries</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Security</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../writer/" class="subnavigation__link">Writer</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../pubsubhubbub/" class="subnavigation__link">Pubsubhubbub</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-6 offset-md-2">
                <h1 class="header__title">
                    Components

                    
                        <small class="header__subtitle">laminas-feed</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-sm-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-feed/" class="header__link header__link--github" title="Go to repository of laminas-feed">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-2 col-sm-12">
                
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#filtering-data-using-htmlpurifier" class="toc__link">Filtering data using HTMLPurifier</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#escaping-data-using-laminas-escaper" class="toc__link">Escaping data using laminas-escaper</a>
                    </li>
                
            </ul>
        </div>
    

            </div>
            <div class="col-md-7 col-sm-12 content" role="main" data-spy="scroll" data-target=".toc">
                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/components/">Components</a></li>

            
                <li class="breadcrumb-item"><a href="..">laminas-feed</a></li>

                
                    
                        
                        
                            <li class="breadcrumb-item">Reader</li>
                        
                    
                

                <li class="breadcrumb-item active" aria-current="page">Security</li>
            
        
    </ol>
</nav>






    
    
        <h2 class="chapter__headline">Reader</h2>
    

    <h1 id="security">Security</h1>
<p>As with any data coming from a source that is beyond the developer's control,
special attention needs to be given to securing, validating and filtering that
data. Similar to data input to our application by users, data coming from RSS
and Atom feeds should also be considered unsafe and potentially dangerous, as it
allows the delivery of HTML and <a href="http://tools.ietf.org/html/rfc4287#section-8.1">xHTML</a>.
Because data validation and filtration is out of <code>Laminas\Feed</code>'s scope, this task
is left for implementation by the developer, by using libraries such as
laminas-escaper for escaping and <a href="http://www.htmlpurifier.org/">HTMLPurifier</a> for
validating and filtering feed data.</p>
<p>Escaping and filtering of potentially insecure data is highly recommended before
outputting it anywhere in our application or before storing that data in some
storage engine (be it a simple file or a database.).</p>
<h2 id="filtering-data-using-htmlpurifier">Filtering data using HTMLPurifier</h2>
<p>Currently, the best available library for filtering and validating (x)HTML data
in PHP is <a href="http://www.htmlpurifier.org/">HTMLPurifier</a>, and, as such, is the
recommended tool for this task.  HTMLPurifier works by filtering out all (x)HTML
from the data, except for the tags and attributes specifically allowed in a
whitelist, and by checking and fixing nesting of tags, ensuring
standards-compliant output.</p>
<p>The following examples will show a basic usage of HTMLPurifier, but developers
are urged to go through and read <a href="http://www.htmlpurifier.org/docs">HTMLPurifier's documentation</a>.</p>
<pre class=codehilite><code class=language-php>// Setting HTMLPurifier's options
$options = [
    // Allow only paragraph tags
    // and anchor tags wit the href attribute
    [
        'HTML.Allowed',
        'p,a[href]'
    ],
    // Format end output with Tidy
    [
        'Output.TidyFormat',
        true
    ],
    // Assume XHTML 1.0 Strict Doctype
    [
        'HTML.Doctype',
        'XHTML 1.0 Strict'
    ],
    // Disable cache, but see note after the example
    [
        'Cache.DefinitionImpl',
        null
    ]
];

// Configuring HTMLPurifier
$config = HTMLPurifier_Config::createDefault();
foreach ($options as $option) {
    $config-&gt;set($option[0], $option[1]);
}

// Creating a HTMLPurifier with it's config
$purifier = new HTMLPurifier($config);

// Fetch the RSS
try {
   $rss = Laminas\Feed\Reader\Reader::import('http://www.planet-php.net/rss/');
} catch (Laminas\Feed\Exception\Reader\RuntimeException $e) {
   // feed import failed
   echo &quot;Exception caught importing feed: {$e-&gt;getMessage()}\n&quot;;
   exit;
}

// Initialize the channel data array
// See that we're cleaning the description with HTMLPurifier
$channel = [
   'title'       =&gt; $rss-&gt;getTitle(),
   'link'        =&gt; $rss-&gt;getLink(),
   'description' =&gt; $purifier-&gt;purify($rss-&gt;getDescription()),
   'items'       =&gt; [],
];

// Loop over each channel item and store relevant data
// See that we're cleaning the descriptions with HTMLPurifier
foreach ($rss as $item) {
   $channel['items'][] = [
       'title'       =&gt; $item-&gt;getTitle(),
       'link'        =&gt; $item-&gt;getLink(),
       'description' =&gt; $purifier-&gt;purify($item-&gt;getDescription()),
   ];
}</code></pre>
<blockquote>
<h3>Tidy is required</h3>
<p>HTMLPurifier is using the PHP <a href="http://php.net/tidy">Tidy extension</a> to clean
and repair the final output. If this extension is not available, it will
silently fail, but its availability has no impact on the library's security.</p>
<h3>Caching</h3>
<p>For the sake of this example, the HTMLPurifier's cache is disabled, but it is
recommended to configure caching and use its standalone include file as it can
improve the performance of HTMLPurifier substantially.</p>
</blockquote>
<h2 id="escaping-data-using-laminas-escaper">Escaping data using laminas-escaper</h2>
<p>To help prevent XSS attacks, Laminas provides the <a href="https://github.com/laminas/laminas-escaper">laminas-escaper component</a>,
which complies to the current <a href="https://www.owasp.org/index.php/XSS_Prevention_Cheat_Sheet">OWASP recommendations</a>,
and as such, is the recommended tool for escaping HTML tags and attributes,
Javascript, CSS and URLs before outputting any potentially insecure data to the
users.</p>
<pre class=codehilite><code class=language-php>try {
    $rss = Laminas\Feed\Reader\Reader::import('http://www.planet-php.net/rss/');
} catch (Laminas\Feed\Exception\Reader\RuntimeException $e) {
    // feed import failed
    echo &quot;Exception caught importing feed: {$e-&gt;getMessage()}\n&quot;;
    exit;
}

// Validate all URIs
$linkValidator = new Laminas\Validator\Uri;
$link = null;
if ($linkValidator-&gt;isValid($rss-&gt;getLink())) {
    $link = $rss-&gt;getLink();
}

// Escaper used for escaping data
$escaper = new Laminas\Escaper\Escaper('utf-8');

// Initialize the channel data array
$channel = [
    'title'       =&gt; $escaper-&gt;escapeHtml($rss-&gt;getTitle()),
    'link'        =&gt; $escaper-&gt;escapeUrl($link),
    'description' =&gt; $escaper-&gt;escapeHtml($rss-&gt;getDescription()),
    'items'       =&gt; [],
];

// Loop over each channel item and store relevant data
foreach ($rss as $item) {
    $link = null;
    if ($linkValidator-&gt;isValid($rss-&gt;getLink())) {
        $link = $item-&gt;getLink();
    }
    $channel['items'][] = [
        'title'       =&gt; $escaper-&gt;escapeHtml($item-&gt;getTitle()),
        'link'        =&gt; $escaper-&gt;escapeUrl($link),
        'description' =&gt; $escaper-&gt;escapeHtml($item-&gt;getDescription()),
    ];
}</code></pre>
<p>The feed data is now safe for output to HTML templates. You can, of course, skip
escaping when simply storing the data persistently, but remember to escape it on
output later!</p>
<p>Of course, these are just basic examples, and cannot cover all possible
scenarios that you, as a developer, can, and most likely will, encounter. Your
responsibility is to learn what libraries and tools are at your disposal, and
when and how to use them to secure your web applications.</p>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../consuming-atom-entry/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../writer/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/laminas/laminas-feed/edit/master/docs/book/security.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-feed</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reader</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../reader/" class="subnavigation__link">Basic Usage</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../http-clients/" class="subnavigation__link">HTTP Clients</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../psr7-clients/" class="subnavigation__link">Using PSR-7 Clients</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../importing/" class="subnavigation__link">Importing Feeds</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../find-feeds/" class="subnavigation__link">Feed Discovery</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../consuming-rss/" class="subnavigation__link">Consuming RSS Feeds</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../consuming-atom/" class="subnavigation__link">Consuming Atom Feeds</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../consuming-atom-entry/" class="subnavigation__link">Consuming Atom Entries</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Security</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../writer/" class="subnavigation__link">Writer</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../pubsubhubbub/" class="subnavigation__link">Pubsubhubbub</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-7 offset-md-2">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Laminas API Tools <a href="https://api-tools.getlaminas.org/">Build RESTful APIs in minutes</a></li>
                </ul>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-4 offset-md-2">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/getlaminas" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://getlaminas.org/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">License</h4>
                <p>
                    Code licensed under <a
                        href="https://github.com/laminas/laminas-feed/blob/master/LICENSE.md">BSD 3-Clause</a>.
                </p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Copyright</h4>
                <p>
                    <!--Built with love by the Laminas team with the help of our
                    <a href="https://github.com/laminas/laminas-feed/graphs/contributors">contributors</a>.<br>-->
                    &copy; 2019-2020 by <a href="https://getlaminas.org/">The Laminas Project</a>.
                </p>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '..',
            project  = "components",
            siteName = 'laminas-feed';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
        <script src="../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-feed" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
